<div class="card card-custom gutter-b">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label">{{ id ? 'Chỉnh sửa' : 'Thêm mới' }} bài học</h3>
    </div>
    <div class="card-toolbar">
      <button type="button" class="btn btn-light" routerLink="/lessons"><i class="fa fa-arrow-left"></i>Quay lại</button>
    </div>
  </div>
  <div class="card-body p-0">
    <div #wizard class="wizard wizard-2" id="kt_wizard_v2" data-wizard-state="step-first">
      <div class="wizard-nav border-right py-8 px-8">
        <div class="wizard-steps">
          <a class="wizard-step" href="javascript:;" data-wizard-type="step" data-wizard-state="current">
            <div class="wizard-wrapper">
              <div class="wizard-icon">
                <span class="svg-icon svg-icon-3x" [inlineSVG]="'./assets/media/svg/icons/Communication/Write.svg'"></span>
              </div>
              <div class="wizard-label">
                <div class="wizard-title">Thông tin</div>
                <div class="wizard-desc">Nhập thông tin bài học</div>
              </div>
            </div>
          </a>
          <a class="wizard-step" href="javascript:;" data-wizard-type="step">
            <div class="wizard-wrapper">
              <div class="wizard-icon">
                <span class="svg-icon svg-icon-3x" [inlineSVG]="'./assets/media/svg/icons/Text/Menu.svg'"></span>
              </div>
              <div class="wizard-label">
                <div class="wizard-title">Nội dung</div>
                <div class="wizard-desc">Nhập nội dung bài học</div>
              </div>
            </div>
          </a>
        </div>
      </div>

      <div class="wizard-body py-5 px-5">
        <div class="row">
          <div class="col-xl-12">
            <div class="pb-5" data-wizard-type="step-content" data-wizard-state="current">
              <h4 class="mb-10 font-weight-bold text-dark">Thông tin bài học</h4>
              <app-lesson-information
                [information]="information"
                [isRequestInfo]="isRequestInfo"
                (onEmitStructureChanged)="onEmitStructureChanged($event)"
                (onEmitInformation)="onEmitInformation($event)"
                (onEmitValidate)="onEmitValidate($event)"
              ></app-lesson-information>
            </div>

            <div class="pb-5" data-wizard-type="step-content">
              <div *ngIf="lesson?.type == 1">
                <h4 class="mb-10 font-weight-bold text-dark">Nội dung bài học</h4>
                <app-lesson-content
                  [content]="content"
                  [isRequestContent]="isRequestContent"
                  (onEmitContent)="onEmitContent($event)"
                ></app-lesson-content>
              </div>
              <div *ngIf="lesson?.type == 2">
                <h4 class="mb-10 font-weight-bold text-dark">Nội dung bài học</h4>
                <div class="card card-custom" style="border: 1px solid #e5e5e5; background-color: #f5f5f5">
                  <div class="card-header">
                    <div class="card-title">
                      <h3 class="card-label">Danh sách files</h3>
                    </div>
                  </div>
                  <div class="card-body p-3">
                    <div class="row">
                      <div class="col-xl-12">
                        <form class="form-inline">
                          <div class="form-group" style="flex: 1; border-radius: 4px; border: solid 1px #ccc">
                            <div class="page-box">
                              <label class="mr-5 w-50px">PDF </label>
                              <input type="text" [(ngModel)]="lesson.pdfFileName" disabled name="pdfFileName" class="form-control ml-2" />
                              <div class="ml-2">
                                <button type="button" (click)="uploadRecourse('pdf')" class="btn btn-outline-secondary">
                                  <span>Tải lên học liệu</span>
                                </button>
                              </div>
                              <div class="ml-2 d-flex align-items-center" style="flex: 1">
                                <span *ngIf="lesson.progressPdf || lesson.progressPdf == 100">
                                  {{ lesson.progressPdf != 100 ? lesson.progressPdf + '%' : '' }}
                                </span>
                                <a
                                  class="ml-3"
                                  *ngIf="lesson.pdfFilePath"
                                  style="font-size: 14px; text-decoration: none"
                                  [href]="lesson.pdfFilePath"
                                  target="blank"
                                >
                                  Xem thử
                                </a>
                              </div>
                              <div class="ml-2 d-flex align-items-center">
                                <a title="Xoá" href="javascript:;" class="text-danger" (click)="removeDoc('pdf')">
                                  <span
                                    [inlineSVG]="'./assets/media/svg/icons/General/Trash.svg'"
                                    class="svg-icon svg-icon-md svg-icon-danger svg-icon-2x"
                                  >
                                  </span
                                  >Xóa
                                </a>
                              </div>
                            </div>
                            <div class="page-box">
                              <label class="mr-5 w-50px">Word </label>
                              <input type="text" [(ngModel)]="lesson.wordFileName" disabled name="wordFileName" class="form-control ml-2" />
                              <div class="ml-2">
                                <button type="button" (click)="uploadRecourse('word')" class="btn btn-outline-secondary">
                                  <span>Tải lên học liệu</span>
                                </button>
                              </div>
                              <div class="ml-2 d-flex align-items-center" style="flex: 1">
                                <span *ngIf="lesson.progressWord || lesson.progressWord == 100">
                                  {{ lesson.progressWord != 100 ? lesson.progressWord + '%' : '' }}</span
                                >
                                <a
                                  class="ml-3"
                                  *ngIf="lesson.wordFilePath"
                                  [href]="lesson.wordFilePath"
                                  target="blank"
                                  style="font-size: 14px; text-decoration: none"
                                >
                                  Xem thử
                                </a>
                              </div>
                              <div class="ml-2 d-flex align-items-center">
                                <a title="Xoá" href="javascript:;" class="text-danger" (click)="removeDoc('word')">
                                  <span
                                    [inlineSVG]="'./assets/media/svg/icons/General/Trash.svg'"
                                    class="svg-icon svg-icon-md svg-icon-danger svg-icon-2x"
                                  >
                                  </span
                                  >Xóa
                                </a>
                              </div>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between border-top pt-10">
              <div class="mr-2">
                <div class="btn btn-light-primary font-weight-bold text-uppercase px-9 py-4" data-wizard-type="action-prev">Quay lại</div>
              </div>
              <div
                (click)="onSubmit()"
                *ngIf="lesson?.type == 1"
                class="btn btn-success font-weight-bold text-uppercase px-9 py-4"
                data-wizard-type="action-submit"
              >
                Lưu lại
              </div>
              <div
                (click)="save()"
                *ngIf="lesson?.type == 2"
                class="btn btn-success font-weight-bold text-uppercase px-9 py-4"
                data-wizard-type="action-submit"
              >
                Lưu lại
              </div>
              <div class="btn btn-primary font-weight-bold text-uppercase px-9 py-4" data-wizard-type="action-next">Tiếp tục</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
